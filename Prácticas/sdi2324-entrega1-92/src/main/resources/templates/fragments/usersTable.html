<div id="usersTable" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity4">

    <div th:if="${ErrorMessage}" class="alert alert-danger" role="alert">
        <p th:text="${ErrorMessage}"></p>
    </div>
    <button onclick="deleteSelectedUsers()" sec:authorize="hasRole('ROLE_ADMIN')" type="button" id="deleteButton" class="btn btn-danger"
            th:text="#{user.delete}">Eliminar Seleccionados</button>
    <table class="table table-hover"   xmlns:sec="http://www.w3.org/1999/xhtml">
        <thead>
        <tr>
            <th sec:authorize="hasRole('ROLE_ADMIN')" scope="col" th:text="#{user.select}">Seleccionar</th>
            <th scope="col" th:text="#{user.email}">Email</th>
            <th scope="col" th:text="#{user.name}">Nombre</th>
            <th scope="col" th:text="#{user.lastname}">Apellidos</th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
            <th scope="col"></th>
        </tr>
        </thead>
        <tbody>
        <tr th:each="user : ${usersList}">
            <td sec:authorize="hasRole('ROLE_ADMIN')"><input type="checkbox" th:id="${user.id}"></td>
            <td class="email" th:text="${user.email}">71888888X</td>
            <td th:text="${user.name}">Nombre del alumno</td>
            <td th:text="${user.lastName}">Apellidos del alumno</td>

            <td><a th:href="${'/user/details/' + user.id}" th:text="#{user.detalles}" sec:authorize="hasRole('ROLE_ADMIN')">detalles</a></td>
            <td><a th:href="${'/user/edit/' + user.id}" th:text="#{user.modify}" sec:authorize="hasRole('ROLE_ADMIN')" class="edit">modificar</a></td>
            <!-- BotÃ³n para agregar amigo -->
            <td>
                <form th:unless="${!user.canReceiveFriendshipInvite(#authentication.getPrincipal().username)}" th:action="@{/invite/send/{id}(id=${user.id})}" method="post">
                    <button class="addFriend btn btn-primary" th:text="#{addFriend}" type="submit">Agregar amigo</button>
                </form>
            </td>
        </tr>
        </tbody>
    </table>


</div>

